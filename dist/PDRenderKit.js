"use strict";let vw=window.innerWidth,vh=window.innerHeight,$history=[location.href],$$android=/android/i.test(navigator.userAgent),$$ios=/iphone|ipad/i.test(navigator.userAgent),$$mobile=$$android||$$ios,$$desktop=!$$mobile,$timer,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_0_,_1_,_2_,_3_,_4_,_5_,_6_,_7_,_8_,_9_,__0,__1,__2,__3,__4,__5,$0,$1,$2,$3,$4,$5,$6,$7,$8,$9,$0_,$1_,$2_,$3_,$4_,$5_,$6_,$7_,$8_,$9_,$_0,$_1,$_2,$_3,$_4,$_5;function _timeout(t,e){let n=setTimeout((function(){clearTimeout(n),t()}),e);return $timer.push(n),n}function _interval(t,e){let n=setInterval((function(){clearInterval(n),t()}),e);return $timer.push(n),n}function timer_(){$timer.forEach((t=>{clearTimeout(t),clearInterval(t)}))}function __(value){return eval("string"==typeof value?value:"")}function $$(t){return null!=t}function $$null(t){return!$$(t)}function $$str(t){return"string"==typeof t}function $$num(t){return"number"==typeof t}function $$bool(t){return"boolean"==typeof t}function $$ary(t){return Array.isArray(Array)}function $$obj(t){return"object"==typeof t&&null!=t&&!$$ary(t)}function $$map(t){return t instanceof Map}function $$func(t){return t instanceof Function}function $$elm(t){return t instanceof Element}function $cookie(t){let e=`${document.cookie};`,n=new RegExp(`${t}=([^ ;]+)?`),r=e.match(n)??[],i=r[r.length-1];if(!r.length||null==i)return null;i=decodeURIComponent(r[r.length-1]);try{return JSON.parse(i)}catch(t){return i}}function _cookie(t,e,n){const r=(new Date).getTime();let i;"string"!=typeof t||String(t||"").trim().length<1||(e="object"==typeof e&&null!=e?JSON.stringify(e).trim():String(e).trim(),i="number"==typeof n?new Date(r+1e3*n):new Date(r+36e5),document.cookie=`${t}=${e}; expires=${i.toUTCString()}; path=/`)}function $key(t){let e="abcdefghijklmnopurstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".split(""),n=e.length,r=[];if("number"==typeof t)for(let i=0;i<t;i++)r.push(e[Math.floor(Math.random()*n)]);return r.join("")}function $file(t){return new Promise(((e,n)=>{if(!t)return()=>n();let r=new FileReader;r.readAsDataURL(t),r.onload=t=>e(t),r.onerror=t=>n(t)}))}function $imageFromImageFile(t){return new Promise(((e,n)=>{if(!t)return()=>n();let r=new FileReader;r.readAsDataURL(t),r.onload=function(t){if(!t.target)return()=>n();let r=new Image;r.src=String(t.target.result),r.onload=()=>e(r),r.onerror=t=>n(t)}}))}function $imageFromVideoFile(t){return new Promise(((e,n)=>{if(!t)return()=>n();let r=new FileReader;r.readAsArrayBuffer(t),r.onload=function(){if(!r.result)return()=>n();let i=new Blob([r.result],{type:t.type}),o=URL.createObjectURL(i),s=document.createElement("video");s.preload="metadata",s.src=o,s.muted=!0,s.playsInline=!0,s.onloadeddata=function(){let t=document.createElement("canvas"),r=t.getContext("2d");if(t.width=s.videoWidth,t.height=s.videoHeight,!r)return()=>n();r.drawImage(s,0,0,t.width,t.height);let i=t.toDataURL("image/jpg"),o=new Image;o.src=i,o.onload=()=>e(o),o.onerror=t=>n(t),s.ontimeupdate=null,s.pause()},s.onerror=t=>n(t),s.play()}}))}function $blob(t,e){let n=window.atob(t.split(",")[1]),r=new ArrayBuffer(n.length),i=new Uint8Array(r);for(let t=0;t<n.length;t++)i[t]=n.charCodeAt(t);return new Blob([r],{type:e})}window.onresize=function(){[vw,vh]=[window.innerWidth,window.innerHeight]};let _chars=Array.from({length:26},((t,e)=>String.fromCharCode(97+e))).map(((t,e)=>{let n=e<10,r=e>=10&&e<20,i=e>=20,o=String(e),s=o.charAt(o.length-1),l=e=>`${e?"$":"_"}${i?"_":""}${s}${r?"_":""} = "${e?t.toUpperCase():t}";`;return`${l(0)}${l(1)}${n?`_${t} = ${e};`:""}`})).join("");var _document,_href,_def,_this;_document=document,_href=location.href,__(_chars),function(t,e,n,r,i,o,s,l,a,u,c,h,f,$,g,p,d,m,y,_,v,b,w,S,E,A,x,L,O,M,j,C,T,N,R,H,I,k,D,q,U,B,F,P,z,G,V,W,J,Y,X,Z,K,Q,tt,et,nt,rt,it,ot,st,lt,at,ut,ct,ht,ft,$t,gt,pt,dt,mt,yt){let _t=t=>{for(const e of"^$*+?!.[](){}|=:"){let n=new RegExp(`\\${e}`,"g");t=t.replace(n,`\\${e}`)}return new RegExp(t)},vt=f+j+L+L+g+S+M+$8_+f+L+y+A+M,bt=A+c+L+g+S+M+$3_+E+$+g,wt=L+g+w+E+C+g+D+m+y+b+$,St=d+g+M+$0+M+M+L+y+h+j+M+g,Et=f+E+A+R+L+y+d+m+M,At=p+y+b+M+g+L,xt=b+g+S+d+M+m,Lt=A+c+L+$+S+f+m+y+j+dt+d+y+M+m+j+h+dt+y+E,Ot=A+c+L+$+S+dt+y+E,Mt=A+c+L+$+S+dt+b+M+$,jt=_+E+h+c+b+b+dt+M+T,Ct=S+M+j+dt+g+$+j+dt+M+T,Tt=w+c+S+$+c+b+c+dt+f+E+w+dt+M+T,Nt=_t(String(b+E+f+c+b+m+E+O+M)),Rt=/[^3-689]{3}(\.[^1-9]){2}(\.[^2-90])/,Ht=_t(Lt),It=_t(Ot),kt=_t(Mt),Dt=_t(jt),qt=_t(Ct),Ut=_t(Tt),Bt=f+L+g+c+M+g+U+b+g+w+g+S+M,Ft=O+M+R+b+g,Pt=y+S+S+g+L+P+et+J+W,zt=m+g+c+$,Gt=c+A+A+g+S+$+D+m+y+b+$,Vt=h+E+$+R+mt+mt+c+p+M+g+L,Wt=" !"+y+w+A+E+L+M+c+S+M,Jt=f+E+S+M+g+S+M+mt+'"'+Q+g+S+$+g+L+g+$+at+h+R+at+Z+q+U+N+M+g+S+O+y+E+S+"-"+_+O+'"'+Wt+yt,Yt=A+E+O+y+M+y+E+S+mt+p+y+N+g+$+Wt+yt,Xt=H+"-"+y+S+$+g+N+mt+e+t+t+t+t+Wt+yt,Zt=h+E+M+M+E+w+mt+t+Wt+yt,Kt=b+g+p+M+mt+t+Wt+yt,Qt=L+y+d+m+M+mt+t+Wt+yt,te=w+c+L+d+y+S+mt+t+at+c+j+M+E+Wt+yt,ee=T+y+$+M+m+mt+e+t+t+"%"+Wt+yt,ne=M+g+N+M+"-"+c+b+y+d+S+mt+f+g+S+M+g+L+Wt+yt,re=f+E+b+E+L+mt+b+y+d+m+M+d+L+c+R+Wt+yt,ie=E+A+c+f+y+M+R+mt+e+Wt+yt,oe="$"+y+S+y+M,se=Z+c+L+$+S+at+W+M+$,le=_document[vt][St](Et),ae=!0;if(ae)if(ae=!1,le&&le===se){if(_document[oe]=1,[Nt,Rt,Dt,Ht,It,kt,qt,Ut][At]((t=>t.test(_href)))[xt]>0)return;let t=_document[Bt](Ft);t[Pt]=[Vt,"{",Jt,Yt,Xt,Zt,Kt,Qt,te,ee,ne,re,ie,"}"].join(""),_document[zt][Gt](t)}else _document[vt][bt][wt](_document[vt])}(_a,_b,0,0,0,0,0,0,0,0,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,0,_1_,_2_,_3_,_4_,_5_,0,_7_,_8_,_9_,__0,__1,__2,__3,__4,__5,0,0,$2,$3,$4,0,0,$7,0,0,0,$1_,$2_,0,0,$5_,0,$7_,0,$9_,0,0,0,0,0,0," ",0,0,0,0,0,0,0,".",":",";"),_def=Object.defineProperty,_this=Array.prototype,_def(_this,"$len",{get:function(){return this.length}}),_def(_this,"$map",{get:function(){const t=new Map;return this.forEach(((e,n)=>t.set(e,n))),t}}),_def(_this,"$random",{get:function(){return this.sort((()=>Math.random()-.5))}}),_def(_this,"$$mt",{get:function(){return this.length<1}}),_def(_this,"_",{value:function(t){let e=this;return Array.isArray(t)?e=e.concat(t):null!=t&&e.push(t),e}}),_def(_this,"_$",{value:function(t){if(null==t)return this;let e=[];return this.forEach(((n,r)=>{const i=t(n,r);null!=i&&e.push(i)})),e}}),_def(_this,"$",{value:function(t){const e=this.length;return"number"!=typeof t||Math.abs(t)>e?null:this[(t<0?e:0)+t]}}),_def(_this,"$i",{value:function(t){const e=this.indexOf(t);return-1==e?null:e}}),_def(_this,"$str",{value:function(t){return"string"!=typeof t&&"number"!=typeof t?this.join(""):this.join(String(t).toString())}}),_def(_this,"$req",{value:function(t={}){return`/${_this.$str("/")}`.replace(/[\/]+/g,"/").$req(t)}}),_def(_this,"$_",{value:function(t){const e=this.length;let n=this;return"number"!=typeof t||Math.abs(t)>e?n:-1===t?(n.pop(),n):0===t?(n.shift(),n):(n=n.splice((t<0?e:0)+t,1),n)}}),_def(_this,"$$",{value:function(t){return-1!==this.indexOf(t)}}),function(t,e){t(e,"$yyyy",{get:function(){return this.getFullYear()}}),t(e,"$yy",{get:function(){return this.getFullYear().toString().slice(-2)}}),t(e,"$y",{get:function(){return this.getFullYear()}}),t(e,"$MM",{get:function(){const t=this.$M;return`${t<10?"0":""}${t}`}}),t(e,"$M",{get:function(){return this.getMonth()+1}}),t(e,"$DD",{get:function(){const t=this.$D;return`${t<10?"0":""}${t}`}}),t(e,"$D",{get:function(){return this.getDate()}}),t(e,"$dd",{get:function(){const t=this.$d;return 0===t?"Sun":1===t?"Mon":2===t?"Tue":3===t?"Wed":4===t?"Thu":5===t?"Fri":6===t?"Sat":"NaN"}}),t(e,"$d",{get:function(){return this.getDay()}}),t(e,"$HH",{get:function(){const t=this.$H;return`${t<10?"0":""}${t}`}}),t(e,"$H",{get:function(){return this.getHours()}}),t(e,"$hh",{get:function(){const t=this.$h;return`${t<10?"0":""}${t}`}}),t(e,"$h",{get:function(){let t=this.$H;return t%=12,t=t||12,t}}),t(e,"$A",{get:function(){return this.$H>=12?"PM":"AM"}}),t(e,"$a",{get:function(){return this.$H>=12?"pm":"am"}}),t(e,"$mm",{get:function(){const t=this.$m;return`${t<10?"0":""}${t}`}}),t(e,"$m",{get:function(){return this.getMinutes()}}),t(e,"$ss",{get:function(){const t=this.$s;return`${t<10?"0":""}${t}`}}),t(e,"$s",{get:function(){return this.getSeconds()}}),t(e,"$timestamp",{get:function(){return Math.floor(this.getTime()/1e3)}}),t(e,"$date",{value:function(t){const e="object"==typeof t&&null!=t,n=this.$y,r=this.$M-1;if(!e)return new Date;const i="object"==typeof t.pre&&null!=t.pre;return Boolean(t.start)&&t.start?new Date(n,r,1):Boolean(t.end)&&t.end?new Date(n,r-1,0):i?Boolean(t.pre.start)&&t.pre.start?new Date(n,r-1,1):Boolean(t.pre.end)&&t.pre.end?new Date(n,r,0):new Date:new Date}}),t(e,"$format",{value:function(t){return(t=t.replace(/A{1}/g,"%A%").replace(/a{1}/g,"%a%").replace(/Y{4}/gi,"%yearL%").replace(/Y{2}/gi,"%yearS%").replace(/Y{1}/gi,"%yearL%").replace(/s{2,}/g,"%secL%").replace(/s{1}/g,"%secS%").replace(/M{2,}/g,"%monthL%").replace(/M{1}/g,"%monthS%").replace(/d{2,}/g,"%dayL%").replace(/d{1}/g,"%dayS%").replace(/D{2,}/g,"%dateL%").replace(/D{1}/g,"%dateS%").replace(/h{2,}/g,"%hourL%").replace(/h{1}/g,"%hourS%").replace(/H{2,}/g,"%hour24L%").replace(/H{1}/g,"%hour24S%").replace(/m{2,}/g,"%minL%").replace(/m{1}/g,"%minS%")).replace(/\%yearL\%/g,this.$yyyy).replace(/\%yearS\%/g,this.$yy).replace(/\%monthL\%/g,this.$MM).replace(/\%monthS\%/g,this.$M).replace(/\%dateL\%/g,this.$DD).replace(/\%dateS\%/g,this.$D).replace(/\%dayL\%/g,this.$dd).replace(/\%dayS\%/g,this.$d).replace(/\%hour24L\%/g,this.$HH).replace(/\%hour24S\%/g,this.$H).replace(/\%hourL\%/g,this.$hh).replace(/\%hourS\%/g,this.$h).replace(/\%minL\%/g,this.$mm).replace(/\%minS\%/g,this.$m).replace(/\%secL\%/g,this.$ss).replace(/\%secS\%/g,this.$s)}})}(Object.defineProperty,Date.prototype);const textAllRegexp=/\{\{\s*([\w\.]+(\s*[\+\-\*\/\%]\s*[0-9]+)?)\s*\}\}/gi,textRegexp=/{{\s*([\w\.]+(\s*[\+\-\*\/\%]\s*[0-9]+)?)\s*}}/i,val0Regexp=/^\(?\s*([\w]+)(\s*\,|\s+)?/i,val1Regexp=/\,\s*([\w]+)\s*\)/i,val2Regexp=/\s+([\w\.]+)\s*$/i,regexCompare=/\s*[\!\>\<\=]+\=*\s*/,regexOperator=/\s*[\+\-\*\/\%]\s*/;(0,Object.defineProperty)(String.prototype,"convertText",{value:function(t,e){t=t?.__(/(\?|\.|\+|\*)/g,"\\$1");const n=this.replace(`{{\\s*?${t}\\s*?}}`.$regexp("i"),e);return n??""}});class PD{dom;path;data;event;done=!1;constructor(t={}){null==$Lazy_Observer&&_LazyListener(),null==$SVG_Observer&&_SVGListener();const e="string"==typeof t.id?`#${t.id}`.$:null;if(!(e instanceof Element))return;this.dom=e,this.path={},this.data=t.data,this.event=t.event??{},this.initChild(e,t.data??{});let n=setInterval((()=>{this.done&&(clearInterval(n),null!=t.next&&t.next(this.dom))}),100)}dataListener(t,e,n){let r=e[t];null==r||"object"!=typeof r||null==r||Array.isArray(r)?null!=r&&Object.defineProperty(e,t,{get:()=>r,set:t=>{r=t,n(t)}}):r.$keys.forEach((t=>{this.dataListener(t,r,n)}))}initChild(t,e={},n={}){const r=document,i=":path",o=":for",s=":if",l=":else-if",a=":else",u=":model";if(!r.$init)return t;const c=async(t,e={},n={})=>{const r=t.$parent(),o=t.$attrAll[i];if(null!=r&&null!=o){if(null==this.path[o])this.path[o]=r;else if(this.path[o]==r)return;fetch(o).then((async i=>{const o=await i.text();"div"._(o).$nodeAll.forEach((e=>t._child(e))),o.$$(/new\s+\$dom/)||this.initChild(t,e,n),t.$nodeAll.forEach((e=>{e instanceof HTMLScriptElement?document.body._child("script"._(e.$)):r._child(e,t)})),t.$rm()})).catch((()=>t.$rm()))}},h=(t,e={},n={})=>{const r=t.$parent(0),i=(t.$attr(o)??"").trim();if(null==r||i.$$mt)return;const s=$key(20),l=t._$(!0)._attr({"dom-tag":s}),a="temp"._(),u=t.$next(0);t.$rm();const c=i?.match(/^\(?\s*(\w+)/)?.$(1),h=i?.match(/\,\s*(\w+)/)?.$(1),f=i?.match(val2Regexp)?.$(1),p=y(f,e,(t=>{const n=r.$sel(`*[dom-tag='${s}']`)?.$i;r.$selAll(`*[dom-tag='${s}']`).forEach((t=>t.$rm())),r._child(l._$(!0),n),this.initChild(r,e,{isFor:!0})}));Array.isArray(p)?p.forEach(((t,n)=>{const i=l._$(!0);a._child(i);const o={[`${c}`]:t,[`${h}`]:n};"object"==typeof t&&null!=t?(t.$keys.forEach((n=>{this.dataListener(n,t,(()=>{const t=r.$sel(`*[dom-tag='${s}']`)?.$i;r.$selAll(`*[dom-tag='${s}']`).forEach((t=>t.$rm())),r._child(l._$(!0),t),this.initChild(r,e,{isFor:!0})}))})),$(i,o),g(i,o,{isFor:!0,isAry:!0}),d(i,o),this.initChild(i,o,{isFor:!0})):($(i,o),g(i,o,{isFor:!0,isAry:!0}),d(i,o))})):"object"==typeof p&&null!=p&&p.$keys.forEach((t=>{const n=l._$(!0);a._child(n),this.dataListener(t,p,(()=>{const t=r.$sel(`*[dom-tag='${s}']`)?.$i;r.$selAll(`*[dom-tag='${s}']`).forEach((t=>t.$rm())),r._child(l._$(!0),t),this.initChild(r,e,{isFor:!0})}));const i=p[t],o={[`${c}`]:t,[`${h}`]:i};$(n,o),g(n,o,{isFor:!0,isObj:!0}),m(n,o),this.initChild(n,o,{isFor:!0,isAry:Array.isArray(i)})})),r._child(a,u)},f=(t,e={},n={})=>{const r=t.$parent(),i=t.$i,o=(t.$attr(s)??"").trim();if(null==r||o.$$mt)return;let u=[t],c=t.$next(0),h=null!=c?.$attr(l),f=null!=c?.$attr(a);for(;null!=c&&(h||f);)u.push(c),c=c.$next(0),h=null!=c?.$attr(l),f=null!=c?.$attr(a);const $=$key(20),g="temp"._(u._$((t=>t._$(!0)._attr({"dom-tag":$}))));let p=!1;u.forEach((t=>{if(t._attr({"dom-tag":$}),p)return t.$rm();const n=t.$attr(s)||t.$attr(l)||t.$attr(a),o=null!=t.$attr(a),u=n?.$ary(regexCompare).$(0),c=n?.$ary(regexCompare).$(1),h=n?.match(regexCompare)?.$(0).trim(),f=y(u,e,(t=>{r.$selAll(`*[dom-tag='${$}']`).forEach((t=>t.$rm())),r._child(g._$(!0),i),this.initChild(r,e,{isFor:!0})}));null==h?p=Boolean(f):">"===h?p=(Number(f)||0)>(Number(c)||0):"<"===h?p=(Number(f)||0)<(Number(c)||0):">="===h||">=="===h?p=(Number(f)||0)>=(Number(c)||0):"<="===h||"<=="===h?p=(Number(f)||0)<=(Number(c)||0):"=="===h||"==="===h?p="null"==c?null==f:"true"==c?Boolean(f):"false"==c?!Boolean(f):"empty"==c?String(f??"").length<1:String(f??"")==String(c):"!="!==h&&"!=="!==h||(p="null"==c?null!=f:"true"==c?!Boolean(f):"false"==c?Boolean(f):"empty"==c?String(f??"").length>0:String(f??"")!=String(c)),t.attr_(s).attr_(l).attr_(a),p||o?p&&t.class_("dom-temp"):t.$rm()})),this.initChild(r,e,n)},$=(t,e={})=>{const n=t.$attr("dom-tag"),r=t.$attrAll.$keys.filter((t=>t.$$(/^:[\w\-]+$/))).filter((t=>!t.$$(/\:(path|for|if|else\-if|else|model)/)));r.$$mt||r.forEach((r=>{const i=(t.$attr(r)??"").trim(),o=y(i,e,(e=>{const r=document.body.$selAll(`*[dom-tag='${n}']`);r.$$mt||r.forEach((n=>{s(t,e)}))}));function s(t,e=""){":id"===r?t.id=e:":class"===r?t._class(e):":src"===r?t.src=e:":alt"===r?t.alt=e:":href"===r?t.href=e:":html"===r?t.innerHTML=e:":bgcolor"===r?null==e||e.length<1?t.style.backgroundColor=i:t.style.backgroundColor=e:":color"===r?null==e||e.length<1?t.style.color=i:t.style.color=e:null==e||e.$$mt?t.attr_(`${r.__(/^:/,"")}`):t._attr({[`${r.__(/^:/,"")}`]:e})}s(t,o),t.attr_(r)}))},g=(t,e={},n={})=>{(()=>{const e=t.$parent(),n=t.$attrAll.$keys.filter((t=>t.$$(/^@[\w]+$/)));null==e||n.$$mt||n.forEach((e=>{const n=e.__(/\@/,"on"),r=t.$attr(e);t.attr_(e),r&&(t[n]=this.event[r])}))})(),(()=>{if(!Boolean(n.isFor))return;const r=t.$attr(o),i=r?.match(/^\(?\s*(\w+)/)?.$(1),s=r?.match(/\,\s*(\w+)/)?.$(1);t.$attrAll.$keys.filter((t=>t.$$(/^:@[\w]+$/))).forEach((r=>{const o=r.__(/^\:\@/,"on"),l=t.$attr(r);let a=l?.$ary("."),u=e,c=a?.$(0),h=u[c];if(a?.shift(),!(Boolean(n.isAry)&&c!=i||Boolean(n.isObj)&&c!=s)){for(;(a??[]).length>0;)u=h,c=a?.$(0),h=u[c],a?.shift();null!=h&&(t[o]=this.event[h])}}))})()},p=(t,e={},n={})=>{const r=t.$attr("dom-tag")||$key(20);t._attr({"dom-tag":r});const i=t._$(!0),o=t.$parent(),s=t.$i,l=t.innerHTML.$$(/\{\{\s*([\w\.]+(\s*[\+\-\*\/\%]\s*[0-9]+)?)\s*\}\}/gi);null!=parent&&l&&t.$nodeAll.filter((e=>e.parentElement===t&&e.nodeType===Node.TEXT_NODE)).forEach((t=>{t.textContent?.match(/\{\{\s*([\w\.]+(\s*[\+\-\*\/\%]\s*[0-9]+)?)\s*\}\}/gi)?.forEach((n=>{const l=n.match(textRegexp)?.$(1);if(null==l)return;const a=y(l,e,(t=>{const n=document.body.$sel(`*[dom-tag='${r}']`);null!=n&&null!=o&&(o._child(i._$(!0),s),n.$rm(),this.initChild(o,e))}));t.textContent=t.textContent?.convertText(l,a)??""}))}))},d=(t,e={})=>{const n=t.$attr(o),r=n?.match(val0Regexp)?.$(1),i=n?.match(val1Regexp)?.$(1);let s=e[i];t.attr_(o),t.$nodeAll.filter((e=>e.parentElement===t&&e.nodeType===Node.TEXT_NODE)).forEach((t=>{t.textContent?.match(/\{\{\s*([\w\.]+(\s*[\+\-\*\/\%]\s*[0-9]+)?)\s*\}\}/gi)?.forEach((n=>{let o=n.match(textRegexp)?.$(1),l=o.$ary("."),a=e,u=l.$(0),c=a[u];if(l.shift(),u===r){for(;l.length>0;)a=c,u=l.$(0),c=a[u],l.shift();o=o.__(/(\?|\.|\+|\*)/g,"\\$1");let e=t.textContent?.__(`{{\\s*?${o}\\s*?}}`.$regexp("i"),c);null==e&&(e=""),t.textContent=e}const h=u.$ary(regexOperator).$(0),f=u.$ary(regexOperator).$(1);if(h===i){null==u||(u.$$(/\+/)?s+=Number(f)||0:u.$$(/\-/)?s-=Number(f)||0:u.$$(/\*/)?s*=Number(f)||0:u.$$(/\//)?s/=Number(f)||0:u.$$(/\%/)&&(s%=Number(f)||0)),o=o.__(/(\?|\.|\+|\*)/g,"\\$1");let e=t.textContent?.__(`{{\\s*?${o}\\s*?}}`.$regexp("i"),s);null==e&&(e=""),t.textContent=e}}))})),this.initChild(t,e,{isFor:!0})},m=(t,e={})=>{const n=t.$attr(o),r=n?.match(val0Regexp)?.$(1),i=n?.match(val1Regexp)?.$(1);t.attr_(o),t.$nodeAll.filter((e=>e.parentElement===t&&e.nodeType===Node.TEXT_NODE)).forEach((t=>{t.textContent?.match(/\{\{\s*([\w\.]+(\s*[\+\-\*\/\%]\s*[0-9]+)?)\s*\}\}/gi)?.forEach((n=>{let o=n.match(textRegexp)?.$(1),s=o.$ary("."),l=e,a=s.$(0),u=l[a];if(s.shift(),a===r){o=o.__(/(\?|\.|\+|\*)/g,"\\$1");let e=t.textContent?.__(`{{\\s*?${o}\\s*?}}`.$regexp("i"),u);null==e&&(e=""),t.textContent=e}if(a===i){for(;s.length>0;)l=u,a=s.$(0),u=l[a],s.shift();o=o.__(/(\?|\.|\+|\*)/g,"\\$1");let e=t.textContent?.__(`{{\\s*?${o}\\s*?}}`.$regexp("i"),u??"");null==e&&(e=""),t.textContent=e}}))})),this.initChild(t,e,{isFor:!0})},y=(t="",e={},n)=>{if(t.$$mt)return;const r=/^LENGTH\(.+\)/.test(t);let i=(t=t.__(/^LENGTH\(|\)$/g,"")).$ary("."),o=e,s=i.$(0),l=o[s];for(i.shift();i.length>0;)o=l,s=i.$(0),l=o[s],i.shift();return this.dataListener(s,o,(t=>{n(t)})),r?l.length:l};this.done=!1,t.$childAll.forEach((t=>{const r=t.$attrAll;if(t.$$class("lazyload")&&$Lazy_Observer.observe(t),t.$$class("svg")&&"SPAN"===t.tagName&&$SVG_Observer.observe(t),null!=t.$parent()&&null==r[l]&&null==r[a]){if(r[i])return c(t,e,n);if(r[o])return h(t,e,n);f(t,e,n),((t,e={})=>{const n=t.$parent(),r=t.$attr(u)?.trim();if(t.attr_(u),y(r,e,(e=>{t.value=e})),null==n||null==r||r.$$mt)return;const i=t instanceof HTMLInputElement,o=t instanceof HTMLTextAreaElement,s=t instanceof HTMLSelectElement;i||o?(t.addEventListener("keyup",(t=>{e[r]=t.target.value})),t.addEventListener("change",(t=>{e[r]=t.target.value}))):s&&t.addEventListener("change",(t=>{e[r]=t.target.value}))})(t,e),$(t,e),g(t,e,n),p(t,e,n),this.initChild(t,e,n)}})),t.class_("dom-temp"),this.done=!0}}function _child(t=[],e){document.body._child(t,e)}function __child(t=[]){document.body.__child(t)}!function(t,e){t(e,"$",{get:function(){return this.innerHTML}}),t(e,"$x",{get:function(){return this.scrollLeft}}),t(e,"$y",{get:function(){return this.scrollTop}}),t(e,"$w",{get:function(){return this.clientWidth}}),t(e,"$h",{get:function(){return this.clientHeight}}),t(e,"$sw",{get:function(){return this.scrollWidth}}),t(e,"$sh",{get:function(){return this.scrollHeight}}),t(e,"$nw",{get:function(){return this.naturalWidth}}),t(e,"$nh",{get:function(){return this.naturalHeight}}),t(e,"$len",{get:function(){return this.children.length}}),t(e,"$i",{get:function(){const t=this.parentElement;return t instanceof Element?[...t.children].indexOf(this):-1}}),t(e,"$classAll",{get:function(){return[...this.classList]}}),t(e,"$attrAll",{get:function(){let t=new Map;for(const e of this.attributes)t.set(e.name,e.value.trim());return Object.fromEntries(t)}}),t(e,"$childAll",{get:function(){return[...this.children]}}),t(e,"$nodeAll",{get:function(){return[...this.childNodes]}}),t(e,"$text",{get:function(){let t=[];return[...this.childNodes].filter((t=>t.nodeType===Node.TEXT_NODE&&t.textContent.trim().length>0)).forEach((e=>t.push(e.textContent.trim()))),t.join(" ")}}),t(e,"$html",{get:function(){return this.outerHTML}}),t(e,"_",{value:function(t=""){return this.innerHTML+=String(t),this}}),t(e,"__",{value:function(t=""){return this.innerHTML=String(t),this}}),t(e,"_$",{value:function(t=!1){return this.cloneNode(Boolean(t))}}),t(e,"_x",{value:function(t=NaN){return t=Number(t),isNaN(t)||(this.scrollLeft=t),this}}),t(e,"_y",{value:function(t=NaN){return t=Number(t),isNaN(t)||(this.scrollTop=t),this}}),t(e,"_w",{value:function(t){return null!=t&&(this.style.width="string"==typeof t&&t.trim().length>0?t:"number"==typeof t?t+"px":""),this}}),t(e,"_h",{value:function(t){return null!=t&&(this.style.height="string"==typeof t&&t.trim().length>0?t:"number"==typeof t?t+"px":""),this}}),t(e,"_pt",{value:function(t){return null!=t&&(this.style.paddingTop="string"==typeof t&&t.trim().length>0?t:"number"==typeof t?t+"px":""),this}}),t(e,"_pl",{value:function(t){return null!=t&&(this.style.paddingLeft="string"==typeof t&&t.trim().length>0?t:"number"==typeof t?t+"px":""),this}}),t(e,"_pb",{value:function(t){return null!=t&&(this.style.paddingBottom="string"==typeof t&&t.trim().length>0?t:"number"==typeof t?t+"px":""),this}}),t(e,"_pr",{value:function(t){return null!=t&&(this.style.paddingRight="string"==typeof t&&t.trim().length>0?t:"number"==typeof t?t+"px":""),this}}),t(e,"_mt",{value:function(t){return null!=t&&(this.style.marginTop="string"==typeof t&&t.trim().length>0?t:"number"==typeof t?t+"px":""),this}}),t(e,"_ml",{value:function(t){return null!=t&&(this.style.marginLeft="string"==typeof t&&t.trim().length>0?t:"number"==typeof t?t+"px":""),this}}),t(e,"_mb",{value:function(t){return null!=t&&(this.style.marginBottom="string"==typeof t&&t.trim().length>0?t:"number"==typeof t?t+"px":""),this}}),t(e,"_mr",{value:function(t){return null!=t&&(this.style.marginRight="string"==typeof t&&t.trim().length>0?t:"number"==typeof t?t+"px":""),this}}),t(e,"class_",{value:function(t=[]){return(Array.isArray(t)?t:"string"==typeof t&&t.trim().length>0?t.split(/[,. ]/):[]).filter((t=>"string"==typeof t&&t.trim().length>0)).forEach((t=>this.classList.remove(t))),this}}),t(e,"class__",{value:function(){return this.className="",this}}),t(e,"_class",{value:function(t=[]){return(Array.isArray(t)?t:"string"==typeof t&&t.trim().length>0?t.split(/[,. ]/):[]).filter((t=>"string"==typeof t&&t.trim().length>0)).forEach((t=>this.classList.add(t))),this}}),t(e,"__class",{value:function(t=[]){return this.class__()._class(t),this}}),t(e,"$$class",{value:function(t=""){return"string"==typeof t&&t.trim().length>0&&this.classList.contains(t)}}),t(e,"$$class_",{value:function(t=!1,e=[]){return Boolean(t)&&"string"==typeof e&&e.trim().length>0?this.class_(e):this._class(e),this}}),t(e,"$$_class",{value:function(t=!1,e=[]){return Boolean(t)&&"string"==typeof e&&e.trim().length>0?this._class(e):this.class_(e),this}}),t(e,"style_",{value:function(t=[]){return(Array.isArray(t)?t:"string"==typeof t&&t.trim().length>0?t.split(/[,. ]/):[]).filter((t=>"string"==typeof t&&t.trim().length>0&&/^[\w\-]+$/.test(t))).forEach((t=>this.style[t]="")),this}}),t(e,"_style",{value:function(t={}){return("object"!=typeof t||null==t||Array.isArray(t)?[]:Object.keys(t)).filter((t=>"string"==typeof t&&t.trim().length>0&&/^[\w\-]+$/.test(t))).forEach((e=>this.style[e]=t[e])),this}}),t(e,"$style",{value:function(t=""){return"string"==typeof t&&t.trim().length>0&&/^[\w\-]+$/.test(t)?this.style[t]:null}}),t(e,"data_",{value:function(t=[]){return(Array.isArray(t)?t:"string"==typeof t&&t.trim().length>0?t.split(/[,. ]/):[]).filter((t=>"string"==typeof t&&t.trim().length>0)).forEach((t=>delete this.dataset[`${t}`])),this}}),t(e,"_data",{value:function(t={}){return("object"!=typeof t||null==t||Array.isArray(t)?[]:Object.keys(t)).filter((t=>"string"==typeof t&&t.trim().length>0)).forEach((e=>this.dataset[`${e}`]=t[e])),this}}),t(e,"attr_",{value:function(t=[]){return(Array.isArray(t)?t:"string"==typeof t&&t.trim().length>0?t.split(/[,. ]/):[]).filter((t=>"string"==typeof t&&t.trim().length>0)).forEach((t=>this.removeAttribute(t))),this}}),t(e,"_attr",{value:function(t={}){return("object"!=typeof t||null==t||Array.isArray(t)?[]:Object.keys(t)).filter((t=>"string"==typeof t&&t.trim().length>0)).forEach((e=>this.setAttribute(e,t[e]))),this}}),t(e,"$attr",{value:function(t=""){return"string"==typeof t&&t.trim().length>0?this.getAttribute(t)??null:null}}),t(e,"$$attr",{value:function(t=""){if("string"==typeof t&&t.trim().length>0){const e=this.getAttribute(t);return null!=e&&!e.trim().$$mt}return!1}}),t(e,"_child",{value:function(t=[],e){return"string"==typeof t&&t.trim().length>0||"number"==typeof t?this.innerHTML+=t:Array.isArray(t)&&t.length>1?t.forEach((t=>{"string"==typeof t&&t.trim().length>0||"number"==typeof t?this.innerHTML+=t:null!=t&&this.appendChild(t)})):Array.isArray(t)&&1===t.length?e instanceof Element&&e.parentElement===this?this.insertBefore(t[0],e):"number"==typeof e&&Math.abs(e)<=this.children.length?this.insertBefore(t[0],this.children[e]):null!=t[0]&&this.appendChild(t[0]):e instanceof Element&&e.parentElement===this?this.insertBefore(t,e):"number"==typeof e&&Math.abs(e)<=this.children.length?this.insertBefore(t,this.children[e]):null!=t&&this.appendChild(t),this}}),t(e,"__child",{value:function(t=[]){return this.__()._child(t),this}}),t(e,"$child",{value:function(t=[]){let e=this;return Array.isArray(t)?t.forEach((t=>{"string"==typeof t&&t.trim().length>0?e=e.querySelector(t):"number"==typeof t&&Math.abs(t)<=e.children.length&&(e=e.children[(t<0?e.children.length:0)+t])})):"string"==typeof t&&t.trim().length>0?e=this.querySelector(t):"number"==typeof t&&Math.abs(t)<=this.children.length&&(e=this.children[(t<0?this.children.length:0)+t]),e===this?void 0:e}}),t(e,"$parent",{value:function(t=0){let e=this.parentElement;if("number"==typeof t&&t>0)for(var n=0;n<t&&null!=e;n++)e=e.parentElement;return e}}),t(e,"$pre",{value:function(t=0){let e=this.previousElementSibling;if("number"==typeof t&&t>0)for(var n=0;n<t&&null!=e;n++)e=e.previousElementSibling;return e}}),t(e,"$next",{value:function(t=0){let e=this.nextElementSibling;if("number"==typeof t&&t>0)for(var n=0;n<t&&null!=e;n++)e=e.nextElementSibling;return e}}),t(e,"$sel",{value:function(t=""){return"string"==typeof t&&t.trim().length>0?this.querySelector(t):null}}),t(e,"$selAll",{value:function(t=""){return"string"==typeof t&&t.trim().length>0?this.querySelectorAll(t)??[]:[]}}),t(e,"$rm",{value:function(){this.remove()}}),t(e,"_go",{value:function(t=""){return"string"==typeof t&&t.trim().length>0&&(this.href=t),this.target="_self",this}}),t(e,"_open",{value:function(t=""){return"string"==typeof t&&t.trim().length>0&&(this.href=t),this.target="_blank",this}}),["load","click","dblclick","scroll","mousedown","mouseup","mouseenter","mouseleave","mouseover","mouseout","mousemove","touchstart","touchmove","touchenter","touchleave","touchend","touchup","drop","dragstart","dragend","dragenter","dragover","dragleave","focus","blur","input","keydown","keyup","change","contextmenu","cut","paste"].forEach((n=>t(e,`_${n}`,{value:function(t){return this[`on${n}`]=t instanceof Function?t:null,this}}))),t(e,"_video",{value:function(t={}){if(this instanceof HTMLVideoElement&&(this._attr({controlsList:["nodownload","noremoteplayback"].join(",")}),"string"==typeof t.preload&&(this.preload=t.preload),"boolean"==typeof t.loop&&(this.loop=t.loop),"boolean"==typeof t.muted&&(this.muted=t.muted),"boolean"==typeof t.controls&&(this.controls=t.controls),"boolean"==typeof t.playsinline&&t.playsinline&&this._attr({playsinline:""}),"boolean"==typeof t.download||"boolean"==typeof t.remote)){let e=[];t.download||e.push("nodownload"),t.remote||e.push("noremoteplayback"),this._attr({controlsList:e.join(" ")})}return this}}),t(e,"_display",{value:function(t=""){return"string"==typeof t&&t.trim().length>0&&this._style({display:t}),this}}),t(e,"scrollToX",{value:function(t,e){if("number"!=typeof t)return this;const n=this.clientWidth,r=this.scrollWidth;let i=r-t<n?r-n:t;return this.scrollTo({left:i,behavior:"smooth"}),this}}),t(e,"scrollToY",{value:function(t,e){if("number"!=typeof t)return this;const n=this.clientHeight,r=this.scrollHeight;let i=r-t<n?r-n:t;return this.scrollTo({top:i,behavior:"smooth"}),this}}),t(e,"scrollToBottom",{value:function(){let t=this.scrollHeight-this.clientHeight;return this.scrollTo({top:t,behavior:"smooth"}),this}})}(Object.defineProperty,Element.prototype),function(t,e){t(e,"$len",{get:function(){return this.children.length}}),t(e,"$childAll",{get:function(){return[...this.children]}}),t(e,"$nodeAll",{get:function(){return[...this.childNodes]}}),t(e,"$str",{get:function(){let t="div"._();return t.appendChild(this),t.innerHTML}}),t(e,"$html",{get:function(){let t="div"._();return t.appendChild(this),t.innerHTML}}),t(e,"_$",{value:function(t=!1){return this.cloneNode(Boolean(t))}}),t(e,"_child",{value:function(t=[]){return"string"==typeof t&&t.trim().length>0||"number"==typeof t?this.appendChild(document.createTextNode(String(t))):Array.isArray(t)&&t.length>1?t.forEach((t=>{"string"==typeof t&&t.trim().length>0||"number"==typeof t?this.appendChild(document.createTextNode(String(t))):null!=t&&this.appendChild(t)})):Array.isArray(t)&&1===t.length?this.appendChild(t[0]):null!=t&&this.appendChild(t),this}})}(Object.defineProperty,DocumentFragment.prototype),function(t,e){t(e,"$jpg",{value:function(t){const e="number"==typeof t,n=document.createElement("canvas"),r=n.getContext("2d"),i=parseInt(this.width),o=parseInt(this.height);if(r){if(e&&t<Math.max(i,o)){const e=i/o,r=t/Math.max(i,o);n.width=Math.floor(e*o*r),n.height=Math.floor(i/e*r)}else n.width=i,n.height=o;return r.fillStyle="white",r.fillRect(0,0,n.width,n.height),r.drawImage(this,0,0,n.width,n.height),n.toDataURL("image/jpeg",1)}}}),t(e,"$png",{value:function(t){const e="number"==typeof t,n=document.createElement("canvas"),r=n.getContext("2d"),i=parseInt(this.width),o=parseInt(this.height);if(r){if(e&&t<Math.max(i,o)){const e=i/o,r=t/Math.max(i,o);n.width=Math.floor(e*o*r),n.height=Math.floor(i/e*r)}else n.width=i,n.height=o;return r.fillStyle="white",r.fillRect(0,0,n.width,n.height),r.drawImage(this,0,0,n.width,n.height),n.toDataURL("image/png",1)}}}),t(e,"$base64",{value:function(t="image/jpeg"){const e=document.createElement("canvas"),n=e.getContext("2d");if(n)return e.width=this.width,e.height=this.height,n.drawImage(this,0,0),e.toDataURL(t,1)}}),t(e,"$blob",{value:function(t="image/jpeg"){const e=this.$base64(t).split(";base64,"),n=e[0].split(":")[1],r=window.atob(e[1]),i=r.length,o=new Uint8Array(i);for(let t=0;t<i;++t)o[t]=r.charCodeAt(t);return new Blob([o],{type:n})}}),t(e,"_downloadJPG",{value:function(t){const e=(()=>null==this.src?"image.jpg":this.src.substring(this.src.lastIndexOf("/")+1))(),n="a"._(),r=URL.createObjectURL(this.$blob("image/jpeg"));n.href=r,n.download=t??e,n._attr({type:"application/octet-stream"}),document.body._child(n),n.click(),n.$rm(),URL.revokeObjectURL(r)}}),t(e,"_downloadPNG",{value:function(t){const e=(()=>null==this.src?"image.png":this.src.substring(this.src.lastIndexOf("/")+1))(),n="a"._(),r=URL.createObjectURL(this.$blob("image/png"));n.href=r,n.download=t??e,n._attr({type:"application/octet-stream"}),document.body._child(n),n.click(),n.$rm(),URL.revokeObjectURL(r)}})}(Object.defineProperty,Image.prototype);class $listener{observer;constructor(t){t=t??{},this.observer=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&t.do instanceof Function&&t.do(e.target)}))})),"string"==typeof t.selector&&[].slice.call(document.querySelectorAll(t.selector)).forEach((t=>this.observe(t)))}observe(t){this.observer.observe(t)}unobserve(t){this.observer.unobserve(t)}}let $SVG_Observer,$Lazy_Observer;function _SVGListener(){let t=[].slice.call(document.querySelectorAll("span.svg"));$SVG_Observer=new IntersectionObserver((t=>{t.forEach((t=>{if(!t.isIntersecting)return;let e=t.target,n=e.getAttribute("src")??"";n.length&&n.$$200().then((t=>{$SVG_Observer.unobserve(e),fetch(n).then((async t=>{let n=await t.text(),r=document.createElement("div");r.innerHTML=n;let i=r.children[0];e.classList.forEach((t=>i.classList.add(t))),i.id=e.id,i.onclick=e.onclick,e.parentElement instanceof HTMLElement&&e.parentElement.insertBefore(i,e),e.remove()}))})).catch((t=>{$SVG_Observer.unobserve(e),e.innerHTML="☒"}))}))})),t.forEach((t=>$SVG_Observer.observe(t)))}function _LazyListener(){const t=[].slice.call(document.querySelectorAll("img.lazyload"));$Lazy_Observer=new IntersectionObserver(((t,e)=>{t.forEach((t=>{const e=t.target;if(t.isIntersecting){const t=e.parentElement,n=e.dataset.src??"",r=e.$$class("fit"),i=e.$$class("fit-p");$Lazy_Observer.unobserve(e),e.src=n,e.classList.remove("lazyload"),(r||i)&&n.length>0&&n.$$200().then((e=>{r&&(t.style["aspect-ratio"]=`${e.target.$nw} / ${e.target.$nh}`),i&&(t.style["aspect-ratio"]=`${e.target.$nw} / ${e.target.$nh}`)})).catch((t=>{}))}}))})),t.forEach((t=>$Lazy_Observer.observe(t)))}function $(t){return"string"==typeof t&&t.trim().length>0?t.$:void 0}function $sel(t){return document.body.querySelector(t)}function $selAll(t){return document.body.querySelectorAll(t)}function $url(t){return"string"==typeof t&&t.trim().length>0?t.$url:location.href.$url}!function(t,e){t(e,"$obj",{get:function(){return Object.fromEntries(this)}}),t(e,"$len",{get:function(){return this.size}}),t(e,"$$mt",{get:function(){return 0===this.size}}),t(e,"_",{value:function(t,e){const n=new Map(this);return n.set(t,e),n}}),t(e,"$",{value:function(t){return this.get(t)}})}(Object.defineProperty,Map.prototype),function(t,e){t(e,"$str",{get:function(){return String(this).toString()}}),t(e,"$num",{get:function(){return Number(this)}}),t(e,"$date",{get:function(){return new Date(1e3*this)}}),t(e,"$gone",{get:function(){const t=Math.floor(Date.now()/1e3),e=parseInt(this),n=Math.abs(t-e),r=t>e,i=r?"":"還有",o=r?"前":"";return n>=31536e3?`${i}${Math.floor(n/31536e3)}年${o}`:n>=2592e3?`${i}${Math.floor(n/2592e3)}個月${o}`:n>=604800?`${i}${Math.floor(n/604800)}週${o}`:n>=86400?`${i}${Math.floor(n/86400)}天${o}`:n>=3600?`${i}${Math.floor(n/3600)}小時${o}`:n>=60?`${i}${Math.floor(n/60)}分鐘${o}`:"剛剛"}}),t(e,"$loop",{value:function(t){if(t instanceof Function)for(let e=0;e<this;e++)t(e)}}),t(e,"$y",{value:function(){return parseInt(this).$date.getFullYear()}}),t(e,"$M",{value:function(){return parseInt(this).$date.getMonth()+1}}),t(e,"$MM",{value:function(){const t=parseInt(this).$date.getMonth()+1;return t<10?`0${t}`:String(t)}}),t(e,"$D",{value:function(){return parseInt(this).$date.getDate()}}),t(e,"$DD",{value:function(){const t=parseInt(this).$date.getDate();return t<10?`0${t}`:String(t)}}),t(e,"$d",{value:function(){return parseInt(this).$date.getDay()}}),t(e,"$dd",{value:function(){const t=parseInt(this).$date.getDay();return 0===t?"星期日":1===t?"星期一":2===t?"星期二":3===t?"星期三":4===t?"星期四":5===t?"星期五":6===t?"星期六":null}}),t(e,"$h",{value:function(){return parseInt(this).$date.getHours()}}),t(e,"$hh",{value:function(){const t=parseInt(this).$date.getHours();return t<10?`0${t}`:String(t)}}),t(e,"$m",{value:function(){return parseInt(this).$date.getMinutes()}}),t(e,"$mm",{value:function(){const t=parseInt(this).$date.getMinutes();return t<10?`0${t}`:String(t)}}),t(e,"$s",{value:function(){return parseInt(this).$date.getSeconds()}}),t(e,"$ss",{value:function(){const t=parseInt(this).$date.getSeconds();return t<10?`0${t}`:String(t)}})}(Object.defineProperty,Number.prototype),function(t,e){t(e,"$map",{get:function(){const t=new Map;for(const e in this)this.hasOwnProperty(e)&&t.set(e,this[e]);return t}}),t(e,"$keys",{get:function(){return Object.keys(this)}}),t(e,"$vals",{get:function(){return Object.values(this)}}),t(e,"$",{value:function(t){return null==t?null:this[String(t)]}}),t(e,"$$",{value:function(t){return null!=t&&null!=this[String(t)]}}),t(e,"$forEach",{value:function(t){if(t instanceof Function)for(const e in this)this.hasOwnProperty(e)&&t(e,this[e])}})}(Object.defineProperty,Object.prototype),function(t,e,n){t(e,"$camel",{get:function(){return this.toString().replace(/-+/g," ").replace(/(?:^\w|[A-Z]|\b\w)/g,(function(t,e){return 0===e?t.toLowerCase():t.toUpperCase()})).replace(/\s+/g,"")}}),t(e,"$len",{get:function(){return this.toString().length}}),t(e,"$num",{get:function(){const t=this.toString(),e=Number(t.replace(/\,/g,""));return isNaN(e)?void console.error(`${t}: 非數字.`):e}}),t(e,"$json",{get:function(){const t=this.toString();try{return JSON.parse(t)}catch(e){return void console.error(`${t}: 非JSON.`)}}}),t(e,"$html",{get:function(){const t={" ":"&nbsp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};return this.toString().replace(/[  \<\>\"\']/g,(e=>t[e]))}}),t(e,"$img",{get:async function(){return new Promise(((t,e)=>{let n=new Image;n.src=this.toString(),n.crossOrigin="anonymous",n.onload=()=>{t(n)},n.onerror=e}))}}),t(e,"$$json",{get:function(){try{return JSON.parse(this.toString()),!0}catch(t){return!1}}}),t(e,"$$mt",{get:function(){return 0===this.toString().trim().length}}),t(e,"__",{value:function(t="",e=""){return this.toString().replace(t instanceof RegExp?t:String(t),String(e))}}),t(e,"$ary",{value:function(t=""){return this.toString().split(t instanceof RegExp?t:String(t))}}),t(e,"$regexp",{value:function(t=""){return new RegExp(this.toString(),String(t))}});let r=!1;t(e,"$req",{value:function(t={}){if(null==t)return;const e=this.toString(),n="object"==typeof t.json&&null!=t.json&&!Array.isArray(t.json);let i;return t.files&&t.tag?(i=new FormData,n&&Object.keys(t.json).forEach((e=>i.append(e,t.json[e]))),t.files.forEach((e=>i.append(t.tag,e)))):n&&(i=JSON.stringify(t.json)),new Promise(((n,o)=>{if(r)return o("等待請求完成.");r=!0;const s=new XMLHttpRequest;s.open(t.method??"GET",e),t.header&&Object.keys(t.header).forEach((e=>{s.setRequestHeader(e,t.header[e])})),s.withCredentials=Boolean(t.credentials)??!1,s.onreadystatechange=()=>{switch(s.readyState){case 1:case 2:case 3:break;case 4:r=!1;const t=s.responseText;if(/^(4|5)[0-9]{2}/.test(String(s.status)))return o(t);try{n(JSON.parse(t),s.status)}catch(e){n(t,s.status)}}},s.send(i)}))}}),t(e,"$fit",{value:function(t){if(null!=t)return this.toString().match(t)}}),t(e,"$en",{value:function(t){return null!=t&&t?encodeURIComponent(this.toString()):encodeURI(this.toString())}}),t(e,"$de",{value:function(t){return null!=t&&t?decodeURIComponent(this.toString()):decodeURI(this.toString())}}),t(e,"$copy",{value:async function(){try{await navigator.clipboard.writeText(this.toString())}catch(t){console.error(t)}}}),t(e,"$$",{value:function(t){return"string"==typeof t?t.trim()===this.toString().trim():t instanceof RegExp?t.test(this.toString()):this.toString().trim().length>0}}),t(e,"$$200",{value:async function(){return new Promise(((t,e)=>{const n=new Image;n.src=this.toString(),n.onload=e=>t(e),n.onerror=t=>e(t)}))}});t(e,"$url",{get:function(){try{return new URL(this.toString())}catch(t){return new URL(`${location.origin}${this.toString()}`)}}}),t(e,"$queryAll",{get:function(){return this.toString().$url.$queryAll}}),["_history","__history","query_","query__","_query","__query","$query"].forEach((n=>t(e,n,{value:function(){const t=this.toString().$url;return t[n].apply(t,Object.values(arguments))}})));t(e,"_fa",{get:function(){return`i.${this.toString().replace(/\s/,".")}`._()}}),t(e,"$",{get:function(){return this.toString().startsWith("#")?document.getElementById(this.substring(1)):/[\.\[\]]/.test(this.toString())?document.querySelector(this.toString()):document.getElementById(this.toString())??document.querySelector(this.toString())}}),t(e,"$all",{get:function(){return document.querySelectorAll(this.toString())}}),t(e,"_",{value:function(t,e){const r=/^\w+(?=[\#\.]*)/i,i=/\.([\w_-]+)?/gi,o=r.test(this)?this.match(r)[0]:null,s=/^(svg|rect|circle|ellipse|line|polyline|polygon|path|text|tspan|g|defs|symbol|image|use|clipPath|mask|linearGradient|radialGradient)$/i.test(o),l="temp"===this.toString(),a="txt"===this.toString(),u=l?document.createDocumentFragment():a?document.createTextNode(String(t)):s?n.createElementNS("http://www.w3.org/2000/svg",o):n.createElement(o),c=i.test(this)?this.match(i):[],h=this.match(/\#([\w_-]+)?/i);if(a)return u;h&&(u.id=h[1]),c.forEach((t=>u.classList.add(t.replace(/^\./,""))));if(!n.$init)return u;let f,$;if(/^span\.svg/i.test(this)&&$SVG_Observer&&$SVG_Observer.observe(u),null==t&&null!=e&&([t,e]=[e,null]),null!=t&&null!=e)[f,$]=[t,e];else if(null==e)"string"==typeof t||"number"==typeof t||Array.isArray(t)?$=t:f=t;else if(null==t)return u;const g="input"===o;if(g||"textarea"===o){const t=/\s(.+)/i,e=this.match(t);u.placeholder=e?e[1]:"";const n=/\@(\w+)/i,r=this.match(n);g&&(u.type=r?r[1]:"test")}if("object"==typeof f&&null!=f&&Object.keys(f).forEach((t=>{const e=f[t];["value","innerText","innerHTML","textContent","contentEditable"].includes(t)?u[t]=e:["color","backgroundColor"].includes(t)?u.style[t]=e:"style"===t?Object.keys(e).forEach((t=>u.style[t]=e[t])):"lazyload"===t?$Lazy_Observer?(u.classList.add("lazyload"),u.setAttribute("data-src",e),$Lazy_Observer.observe(u)):u.src=e:null!=e&&u.setAttribute(t,e)})),null!=$){const t="string"==typeof $,e="number"==typeof $,n=Array.isArray($);if(t||e){const t=String($);"img"===o||"source"===o?u.src=t:u.innerHTML=t}else n&&$.forEach((t=>{const e=t instanceof Element;"string"==typeof t||"number"==typeof t?l?u.appendChild(document.createTextNode(String(t))):u.innerHTML+=t:e&&u.appendChild(t)}))}return u}})}(Object.defineProperty,String.prototype,document),function(t,e){t(e,"$queryAll",{get:function(){const t=new URLSearchParams(this.search),e=new Map;return t.forEach(((t,n)=>{e.set(t,n)})),Object.fromEntries(e)}}),t(e,"_history",{value:function(t){const e=this.href;return $history.push(e),history.pushState(null,"",e),"string"==typeof t&&t.trim().length>0&&(document.title=t),this}}),t(e,"__history",{value:function(t){const e=this.href;return $history.pop(),$history.push(e),history.replaceState(null,"",e),"string"==typeof t&&t.trim().length>0&&(document.title=t),this}}),t(e,"query_",{value:function(t){let e=this.origin+this.pathname,n=this.$queryAll;return"string"==typeof t&&t.trim().length>0?n[t]=null:Array.isArray(t)&&t.forEach((t=>{n[String(t)]=null})),Object.keys(n).forEach(((t,r)=>{e+=`${0==r?"?":"&"}${t}=${n[t]}`})),new URL(e)}}),t(e,"query__",{value:function(){return new URL(this.origin+this.pathname)}}),t(e,"_query",{value:function(t){let e=this.origin+this.pathname,n=this.$queryAll;return"object"!=typeof t||null==t||Array.isArray(t)||Object.keys(t).forEach((e=>n[e]=t[e])),Object.keys(n).forEach(((t,r)=>e+=`${0==r?"?":"&"}${t}=${n[t]}`)),new URL(e)}}),t(e,"__query",{value:function(t){return this.query__()._query(t)}}),t(e,"$query",{value:function(t){return this.searchParams.get(t)}})}(Object.defineProperty,URL.prototype);